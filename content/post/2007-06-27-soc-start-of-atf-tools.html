---
title: "SoC: Start of the atf tools"
date: 2007-06-27 10:25:00 -0400
categories:
  - "atf"
  - "soc"
julipedia: 2007/06/soc-start-of-atf-tools.html
excerpt_separator: </p>
slug: soc-start-of-atf-tools
---
Aside from the libraries I already mentioned in a <a href="http://julipedia.blogspot.com/2007/06/soc-getting-started.html">past post</a>, atf<sup>1</sup> will also provide several tools to run the tests.  An interesting part of the problem, though, is that many tests will be written in the POSIX shell language as that will be <span style="font-style: italic;">much</span> easier than writing them in C or C++: the ability to rapidly prototype tests is a fundamental design goal; otherwise nobody could write them!<br /><br />However, providing two interfaces to the same framework (one in POSIX shell and one in C++) means that there could be a lot of code duplication in the two if not done properly.  Not to mention that sanely and safely implementing some of these features in shell scripting could be painful.<br /><br />In order to resolve the above problem, the atf will also provide several binary tools that will be helpers for the shell scripts.  Most of these tools will be installed in the <tt>libexec</tt> directory as they should not be exposed to the user, yet the shell scripts will need to be able to reach them.  The key idea will be to later build the shell interface on top of the binary one, reusing as much code as possible.<br /><br />So far I have the following tools:<br /><ul><li>atf-config: Used to dynamically query information about atf's installation.  This is needed to let the shell scripts locate where the tools in <tt>libexec</tt> can be found (because they are not in the path!).</li><li>atf-format: Pretty-prints a message (single- or multi-paragraph), wrapping it on terminal boundaries.<br /></li><li>atf-identify: Calculates a test program's identifier based on where it is placed in the file system.  Tests programs will be organized in a directory hierarchy, and each of them has to have a unique identifier.</li></ul>The next one to write, hopefully, will be atf-run: the tool to effectively execute multiple test programs in a row and collect their results.<br /><br />Oh, and in case you are wondering. Yes, I have decided to provide each tool as an independent binary instead of a big one that wraps them all (such as cvs(1)).  This is to keep them as small as possible — so that shell scripts can load them quickly — and because this seems to be more in the traditional Unix philosophy of having tools for doing very specific things :-)<br /><br /><sup>1</sup> Should I spell it atf, ATF or Atf?
