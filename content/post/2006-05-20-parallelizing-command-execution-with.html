---
title: "Parallelizing command execution with vxargs"
date: 2006-05-20 07:44:00 -0400
julipedia: 2006/05/parallelizing-command-execution-with.html
slug: parallelizing-command-execution-with
---
If you need to maintain multiple hosts, you know how boring it is to repeat the exact same task on all of them. I'm currently using <a href="http://www.planet-lab.org/">PlanetLab</a> as part of a class assignment and I'm facing this problem because I need to set up around 10 machines and execute the same commands on all of them.<br /><br /><a href="http://dharma.cis.upenn.edu/planetlab/vxargs/">vxargs</a> is a nice Python script that eases this task. It lets you run a command parametrizing it with a given set of strings (e.g. host names), similar to what <tt>find</tt>'s <tt>-exec</tt> flag does. First of all, you construct a file with the list of host names you need to control and then feed it to the script alongside the command you need to execute. For example, to upload a <tt>dist.tgz</tt> file to all the servers:<br /><br /><tt>vxargs -a hosts.list -o /tmp/result scp dist.tgz {}:</tt><br /><br />The utility will replace the <tt>{}</tt> substring with each line in <tt>hosts.list</tt> and will execute the command. The nice thing is that vxargs runs all tasks in <i>parallel</i>, maximizing efficience. During execution, its cursed-based interface shows the progress of each command. And when all jobs are over, you will find their output (stdout and stderr) as well as their exit code in the <tt>/tmp/result</tt> directory. Fairly useful.<br /><br />Despite that manually installing vxargs is easy, there is now a <a href="http://cvsweb.netbsd.org/bsdweb.cgi/pkgsrc/sysutils/vxargs">vxargs package</a> in pkgsrc.
