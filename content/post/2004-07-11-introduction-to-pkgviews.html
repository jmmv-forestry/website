---
title: "An introduction to pkgviews"
date: 2004-07-11 10:03:00 -0400
julipedia: 2004/07/introduction-to-pkgviews.html
excerpt_separator: </p>
---
<a href="http://www.netbsd.org/Documentation/software/pkgviews.pdf">pkgviews</a> is a new technology in <a href="http://www.pkgsrc.org/">pkgsrc</a>; in fact it's not that new, but it is getting popular nowadays. What does it provide over the regular pkgsrc? It lets you install every package in an independent directory, called the <i>depot directory</i>.  Lets say you install the <tt>buildtool-0.16</tt> package; all of its files will end up in <tt>/usr/pkg/packages/buildtool-0.16</tt>, and <i>nothing</i> will be installed outside that location.  <p>Which are the advantages of this approach? On the first hand, all the files coming from a single package are grouped in a single directory, making things a lot clearer when searching for files. On the other hand, it allows the concurrent installation of multiple versions of the same program. This last reason is specially important, as it simplifies the process of updating a shared library (which is a PITA if has changed its major version number) or updating a server with a very short offline window (consider <a href="http://www.postgresql.org/">PostgreSQL</a>, where you have to dump the database using the old version and import it in the new one).</p>  <p>Even though, you may be asking yourself if this is worth the effort, as doing it makes <tt>PATH</tt> settings unviable.  Well, here is where <i>views</i> come to play.  pkgviews lets you create a directory that holds <i>symlinks</i> to the packages installed under <tt>/usr/pkg/packages</tt>; these directories are views.  The default view, <tt>/usr/pkg</tt>, contains links to all installed packages (unless modified by the administrator). But if that's not enough for you, you can create as much views as you want. For example, you could create a <tt>/usr/gnome</tt> view that hold links to all your <a href="http://www.gnome.org/">GNOME</a> packages, and nothing else. Then, the end user has to configure his path to point to the view he wants and he gets direct access to all the packages in it.</p>  <p>Cool, isn't it? Of course! ;-) But there are still some problems, like handling packages that use "shared" directories (i.e., directories holding plugins and similar stuff). This is something being worked on at the moment, and it's worth a future post. For now, read the <tt>pkgsrc/mk/buildlink3/PKGVIEWS_UG</tt> file included in pkgsrc and start playing!</p><p class="mobile-post"></p>
