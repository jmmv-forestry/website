---
title: "Alternatives added to pkgsrc"
date: 2005-01-29 18:21:00 -0500
julipedia: 2005/01/alternatives-added-to-pkgsrc.html
excerpt_separator: </p>
slug: alternatives-added-to-pkgsrc
---
<p>A few days ago (on the 25th), I finally added the <a href="http://mail-index.netbsd.org/pkgsrc-changes/2005/01/25/0050.html">alternatives framework</a> to <a href="http://www.pkgsrc.org/">pkgsrc</a>; haven't had a chance to write about it until now.</p>  <p>The actual implementation is very different from what I had in mind when I started.  It is composed of an independent utility, <a href="http://cvsweb.netbsd.org/bsdweb.cgi/pkgsrc/pkgtools/pkg_alternatives/">pkg_alternatives</a>, and a make module, <a href="http://cvsweb.netbsd.org/bsdweb.cgi/pkgsrc/mk/alternatives.mk?rev=HEAD&content-type=text/x-cvsweb-markup">alternatives.mk</a>. The later accomplishes perfect integration of the former with pkgsrc, so that the use of alternatives during package development is as painless as possible.</p>  <p>First of all, and as I already <a href="http://www.livejournal.com/users/jmmv/24056.html">discussed</a>, this implementation uses wrappers in favor of symbolic links for better flexibility (specially across NFS-mounted trees).</p>  <p>WRT its use during development, the package author only has to create an additional file, namely <tt>ALTERNATIVES</tt>, which is automatically read during installation.  Each line of this file is fed to the "<tt>pkg_alternatives -w register</tt>" command to add the given wrapper/alternative pair to the database.  There is no need to define any special variable.</p>  <p>Furthermore, the pkg_alternatives utility has been reworked to support two modes of operation: the group (AKA package) mode and the wrapper mode. The former operates on a whole set of wrappers; each set is identified by the package name that created it. The later operates on independent wrappers, and can be used by the user to tune each wrapper to suit his needs.</p>  <p>At last, the alternatives framework has been made completely optional due to lots of complaints (and they were right). It will only be activated when the administrator explicitly installs the pkg_alternatives package. Otherwise, no wrappers will be created anywhere. And all of this is binary package friendly, of course.</p>  <p>At the moment, only vim and nvi have been converted to use this system. I will commit updates for both the Python and Java packages very soon, as there has been no more negative feedback.</p>  <p>Hope this makes pkgsrc a bit more powerful, specially when used on extremely reduced Linux distributions :-)</p><p class="mobile-post"></p>
