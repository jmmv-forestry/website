---
title: "Cleaning up a Debian box"
date: 2005-09-26 15:27:00 -0400
julipedia: 2005/09/cleaning-up-debian-box.html
excerpt_separator: </p>
---
<p>I have to confess that, for a long time, I was a big <a href="http://www.debian.org/">Debian</a> fan; this changed when I switched to the BSDs, but I still think that it is (one of) the best GNU/Linux distribution. This, and because its excellent hardware support, is why it's the main system on my iBook G3.</p>  <p>As a user, it's very common to install lots of packages just to try them, followed by a quick deinstallation when you realize they don't suit your needs. Unfortunately, following common procedures often leaves useless garbage in the file system.</p>  <p>The first annoying thing are installed packages that provide libraries but which aren't used by any other package. These are often called <i>orphan packages</i> and can be listed by using the <tt>deborphan</tt> utility (which must be installed first).  Assuming you have it, do the following to remove all orphaned libraries:</p>  <tt># dpkg --purge $(deborphan)</tt>  <p>Note that this in turn may obsolete other libraries, so rerun this command until <tt>deborphan</tt> prints nothing. Also, please bear in mind that this is dangerous if you have installed software from other means — not from Debian packages — as those libraries may still be used.</p>  <p>Then we have obsolete configuration files. Whenever you remove a package, all its files are removed except the configuration ones, in case you did some modification you want to preserve during an eventual reinstallation. This may be OK in some scenarios but, personally, when I delete something I want it really gone. Here comes <tt>dpkg</tt>'s <tt>--purge</tt> option to help, which removes all leftovers of a previously installed package.</p>  <p>But how to purge all configuration files from packages that were once installed?  Just do the following:</p>  <tt># dpkg --purge $(dpkg --list | grep ^rc | awk '{ print $2; }')</tt>  <p>This constructs a list of packages which are removed but still have their configuration files installed (denoted by the <tt>^rc</tt> pattern) and passes this list to the package management utility to purge all obsolete files.</p><p class="mobile-post"></p>
