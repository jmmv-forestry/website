---
title: "Buildtool status"
date: 2004-12-01 10:49:00 -0500
julipedia: 2004/12/buildtool-status.html
excerpt_separator: </p>
---
<p>Hmm, <a href="http://buildtool.sourceforge.net/">Buildtool</a>... one of my pet projects, probably the one on which I've spent the most time working... and it was even starting to get some (few) popularity lately</p>  <p>But I must admit it. The code is, in its actual form, dead :-( It's unmanageable (shell scripting doesn't scale, you know) and breaks in many, many places. Just consider the following facts:</p>  <ul> <li>Detection of C++ features from <tt>bt_config</tt> fails in many cases.</li> <li><tt>bt_logic</tt>'s behavior is less than acceptable, and adding functionality to it is a PITA.</li> <li>Several modules haven't been modified across versions, so they don't work properly.  For example, <tt>bt_lint</tt> is almost useless.</li> <li>Shared library handling is broken in many systems, and fixing it could be very difficult.</li> <li>The code exposes internals too much, specially in environmental variables and C/C++ defines. But cleaning that up is also complex due to the nature of shell scripts.</li> <li>I was suggested recently to make <tt>bt_dist</tt> only include in tarballs what was really needed, and not everything (just like <a href="http://www.gnu.org/software/automake/">GNU Automake</a>'s <tt>make dist</tt> does.  I like the suggestion, but implementing correctly is impossible due to the current code.</li> </ul>  <p>... plus a large etcetera. All in all, too many problems that can't be solved without doing very gross hacks or restarting the project from scratch. This is why I haven't touched the code since the beginning of the summer.</p>  <p>But... you know what? For some reason, I'm willing to rewrite it from scratch. Of course, using a real programming language. The choices I have in mind are ("obviously" ;-):</p>  <ul> <li><i>C++</i>: I really like C++, together with the STL. Yes, believe me! It simplifies programming a lot, and OOP is wonderful. But I'm a bit afraid of portability. If I use this, it must follow the ANSI standard (not doing so could be silly), which means that users will need a compiler that follows the standard, such as <a href="http://gcc.gnu.org/">GNU GCC</a>. This is not a big problem, since GCC compiles almost anywhere, but may add problems to end users. However, by the time the program is usable, the situation may have improved a lot, hehe.</li>  <li><i>C</i>: Very portable, assuming you know where the portability problems arise (not a big problem for me). But what really bothers me is that it slows down development <i>a lot</i>: I'd have to create my own classes to handle containers (hash tables, linked lists, etc.) and handle dynamic memory even for trivial tasks. I'd also loose polymorphism, inheritance, exceptions... Ok, ok, <a href="http://www.gnome.org/">GNOME</a> emulates OOP in C, but I'm not too keen on that.</li> </ul>  <p>If I can't find any strong reason not to use C++, I'll stick to it. In fact, I've already written a bit of code (program detection) and it has been easy :-)</p>  <p>Oh, I listen, "How could build scripts be?".  Well, I have XML in mind - something similar to <a href="http://ant.apache.org/">Apache Ant</a>.  Otherwise I'll have to invent and write a parser for a custom language (ew, not funny).  But that's something yet to decide.</p><p class="mobile-post"></p>
