---
title: "SoC: Short-term planning"
date: 2007-07-02 15:41:00 -0400
categories:
  - "atf"
  - "soc"
julipedia: 2007/07/soc-short-term-planning.html
excerpt_separator: </p>
---
SoC 2007's mid-term evaluation is around the corner.  I have to present some code on June 9th.  In fact, it'd be already public if we used a decent VCS instead of CVS, but for now I'll keep the sources in a local monotone database.  We'll see how they'll be made public later on.<br /><br />Summarizing what has been done so far: I've already got a working prototype of the atf core functionality.  I have to confess that the code is still very ugly (and with that I mean you really don't want to see it!) and that it is incomplete in many areas, but it is good enough as a "proof of concept" and a base for further incremental improvement.<br /><br />What it currently allows me to do is:<br /><ul><li>Write test programs (a collection of test cases) in C.  In reality it is C++ as <a href="http://julipedia.blogspot.com/2007/06/soc-getting-started.html">we already saw</a>, but I've added several macros to hide the internals of the library and simplify the definition of test cases.  So basically the test writer will not need to know that he's using C++ under the hood.  (This is also to mimic as much as possible the shell-based interface.)</li><li>Write test programs in POSIX shell.  Similar as above, but for tests written using shell scripts.  (Which I think will be the majority.)</li><li>Define a "tree of tests" in the file system and recursively run them all, collecting the results in a single log.  This can be done without the source tree nor the build tools (in special make), and by the end user.</li><li>Wrote many tests to test atf itself.  More on this on tomorrow's post.<br /></li></ul>What I'm planning to do now, before the mid-term evaluation deadline, is to integrate the current code into the NetBSD's build tree (not talking about adding it to the official CVS yet though) to show how all these ideas are applicable to NetBSD testing, and to ensure everything can work with <tt>build.sh</tt> and cross-compilation.<br /><br />Once this is done, which shouldn't take very long I hope, I will start polishing the current atf's core implementation.  This means rewriting several parts of the code (in special to make it more error-safe), adding more tests, adding manual pages for the tools and the interfaces, etc.  This is something I'm willing to do, even though it'll be a hard and long job.
