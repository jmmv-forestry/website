---
title: "Use explicit conditionals"
date: 2011-04-30 05:29:00 -0400
categories:
  - "c"
julipedia: 2011/04/use-explicit-conditionals.html
excerpt_separator: </p>
---
In C — or, for that matter, several other languages such as Python or C++ — most native types can be coerced to a boolean type: expressions that deliver integers, pointers or characters are automatically treated as boolean values whenever needed. For example: non-zero integer expression and non-NULL pointers evaluate to true whereas zero or NULL evaluate to false.<br /><br />Many programmers take advantage of this fact by stating their conditionals like this:<br /><br /><pre>void func(const int in) {<br />    if (in) {<br />        ... do something when in != 0 ...<br />    } else {<br />        ... do something else when in == 0 ...<br />    }<br />}</pre><br />... or even do something like:<br /><br /><pre>bool func(const struct mystruct *ptr) {<br />    int out = calculate_out(in);<br /><br />    ... do something more with out ...<br /><br />    return out;  // The return type is bool though; is this ok?<br />}</pre><br />... but such idioms are sloppy and can introduce confusion or bugs. Yes, things work in many cases, but "work" is not a synonym for "good" ;-)<br /><br />Taking advantage of coercions (automatic type conversions) typically makes the code harder to follow. In statically-typed languages, whenever you define a variable to be of a particular type, you should adhere to said type by all means so that no confusion is possible. Conceptually, an integer is not a boolean and therefore it should not be treated as such. But this is just a matter of style.<br /><br />On the other hand, the automatic conversions can lead to hidden bugs; for example, in the second function above, did we really want to convert the "out" value to a boolean or was that a mistake? &nbsp;This is not so much a matter of style but a matter of careful programming, and having as much state as possible "in your face" can help prevent these kind of trivial errors.<br /><br />In contrast, one would argue that having to provide explicit checks or casts on every expression is a waste of time. But keep in mind that code is supposed to be written once and read many times. Anything you can do to communicate your <i>intent</i> to the reader will surely be appreciated.<br /><br />Disclaimer: the above is my personal opinion only. Not following the style above should have no implications on the resulting binary code. (Wow, this post had been sitting as a draft around here for a too long time.)
