---
title: "Tabulators vs. spaces"
date: 2005-02-26 11:02:00 -0500
julipedia: 2005/02/tabulators-vs-spaces.html
excerpt_separator: </p>
---
<p>Code indentation is a very personal thing; people use 2, 4, 8, or any other amount of whitespace to align their constructions. However, few of them pay attention to the usage of spaces or tabulators to accomplish what they want. Some others do, but problems remain. Let's analyze what these are:</p>  <p>Many text editors try to be smart and replace groups of eight spaces by a tabulator character. This may seem like a good idea to reduce on-disk space, because the resulting document will <i>usually</i> look the same. But IMNSHO, this is a very big mistake. The code ends up with such a mixture of spaces and tabulators that it's almost impossible to edit them easily, specially if you have to change the indentation of a block of code (either manually or automatically). Consider the following chunk of code:</p>  <pre>void function(void) {<br />       if (...) { // 1 tab<br />               statement1; // 2 tabs<br />               statement2; // 16 spaces<br />               statement3; // 1 tab 8 spaces<br />       } // 8 spaces<br />}</pre><p></p>  <p>Ridiculous, isn't it?  Of course it is, but it <i>happens</i> a lot.  Now, suppose Joe the user sets up his editor to show tabulators as two spaces.  He will see the following:</p>  <pre>void function(void) {<br /> if (...) {<br />   statement1;<br />               statement2;<br />         statement3;<br />       }<br />}</pre><p></p>  <p>What a neat result.  It gets even worse if the original writer does not use 8-spaces for tabulators.  Just try to do a <tt>less</tt> over the file afterward; you'll be scared.</p>  <p>Some other people think that, by using tabulators, people will be able to read the code following their indentation preferences; i.e., adjusting the tabulator size (what we did in the previous example). Hahaha, what an utopia!</p>  <p>The first problem is that lines will be too long (or too short, but this is not a problem). Suppose you configure your editor to treat tabulators as two spaces. If you care about readability, you will write text until you hit the right margin of the screen, and break the line at that point. OK, good. But now, another reader looks at the code with a size of eight, and all lines wrap into multiple ones.</p>  <p>The second problem is that, to achieve what you want, you will have to pay <i>a lot</i> (and I really mean that) of attention to indentation, basically because your editor will keep doing nasty things. Consider this chunk of code:</p>  <pre>void function(void) {<br />       if (...) { // 1 tab<br />               (void)printf("very long string", // 2 tabs<br />                            arg1, arg2); // 3 tabs, 5 spaces<br />       } // 1 tab<br />}</pre><p></p>  <p>Note that we originally wanted to align the line containing <tt>arg1</tt> to end up just after the parenthesis of the <tt>printf</tt> call.  That line has three tabulators, but its indentation <i>level</i> is <i>two</i>. Therefore, it should only have two tabulators and 13 spaces. Otherwise, Joe looks at that code again, with a setting of two spaces per tabulator, and he sees:</p>  <pre>void function(void) {<br /> if (...) { // 1 tab<br />   (void)printf("very long string", // 2 tabs<br />          arg1, arg2); // 3 tabs, 5 spaces<br /> } // 1 tab<br />}</pre><p></p>  <p>Again, an ugly result.</p>  <p>Conclusion: handling code with mixed tabulators is difficult; too difficult to even worry about it. I've seen many projects (<a href="http://www.boost.org/">Boost</a>, for example) banning their usage, and I do understand them. Personally, I use an indentation level of four spaces and completely disable tabulators from my editor, usually <a href="http://www.vim.org/">Vim</a>.  If you wonder how to do it, add the following lines to your <tt>~/.vimrc</tt> file:</p>  <pre>set expandtab<br />set shiftwidth=4<br />set softtabstop=4</pre><p></p>  <p>And here are some minor goodies for <a href="http://www.gnu.org/software/emacs/">GNU Emacs</a>, which can be placed in your <tt>~/.emacs</tt> file:</p>  <pre>; Set the default fill column to something wider.<br />(setq default-fill-column 75)<br /><br />; Highlight trailing whitespace in lines.<br />(setq-default show-trailing-whitespace t)<br /><br />; Do not use TABs to indent, unless a buffer overrides it explicitly.<br />(setq-default indent-tabs-mode nil)</pre><p></p>  <p><b>Edit (Feb 27th)</b>: Some minor changes in the code examples' comments.</p><p class="mobile-post"></p>
