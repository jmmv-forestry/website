---
title: "Installing NetBSD/macppc on a Mac Mini G4"
date: 2010-01-11 18:22:00 -0500
categories:
  - "mac"
  - "netbsd"
julipedia: 2010/01/installing-netbsdmacppc-on-mac-mini-g4.html
excerpt_separator: </p>
---
Yesterday, I spent a while installing NetBSD/macppc 5.0.1 on a Mac Mini G4.  The process wasn't easy, as it involved the following steps. I'm omitting many details, as they are "common knowledge" to Mac users (or otherwise can be easily found on the net):<br /><ul><li>After booting the installer from the CD image, drop into the shell.</li><li>Use <tt>pdisk</tt> to create an <tt>Apple_HFS</tt> partition for the boot loader and two <tt>Apple_UNIX_SVR2</tt> partitions, one for the root file system and another for swap.</li><li>Run <tt>sysinst</tt> and install the system. When asked to repartition the disk, just say <i>Use existing partition sizes</i>.</li><li>Once the system is installed, drop again into the shell before rebooting.</li><li>Mount your hard disk into <tt>/mnt</tt> and chroot into it.</li><li>Fetch a copy of pkgsrc.</li><li>Install the <tt>sysutils/hfsutils</tt> package.</li><li>Use <tt>hformat</tt> to create a new HFS file system in the <tt>Apple_HFS</tt> partition we created.</li><li>Mount the installation CD.</li><li>Copy, using <tt>hcopy</tt>, the <tt>ofwboot.xcf</tt> file from the CD to the boot partition.</li><li>Reboot.</li><li>Drop into the OpenFirmware setup (Command+Option+P+R).</li><li>Set <tt>boot-device</tt> to <tt>hd:,ofwboot.xcf</tt>.</li><li>Set <tt>boot-file</tt> to <tt>netbsd</tt>.</li><li>And here is the tricky thing to get the machine to auto-boot: Set <tt>boot-command</tt> to <tt>." hello" cr " screen" output boot</tt>, not <tt>mac-boot</tt>.</li></ul><div>I found the last command somewhere on the Internet (dunno where now), but, supposedly, a regular <tt>mac-boot</tt> should have worked. In fact, it works if you call this command from the prompt, but not during automatic boot. (It turns out to be a problem with the version of OpenFirmware I have.)</div><div><br /></div><div>Just writing down the steps in case I need them later on. Installing Debian stable was much, much easier, but the installer for testing crashes every day with a different error, so I gave up.</div><div><br /></div><div>(Oh, by the way, I did the same installation into an old PowerMac G3 and that was really painful. The machine refused to boot from any of the CDs I tried and the prebuilt kernels hang during initialization due to a bogus driver. In the end: netbooting and using custom kernels.)</div>
