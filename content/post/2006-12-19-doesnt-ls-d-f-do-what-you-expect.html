---
title: "Doesn't 'ls f*' do what you expect?"
date: 2006-12-19 09:14:00 -0500
categories:
  - "unix"
julipedia: 2006/12/doesnt-ls-d-f-do-what-you-expect.html
slug: doesnt-ls-d-f-do-what-you-expect
---
If you have ever ran <tt>ls</tt> on a directory whose contents don't fit on screen, you may have tried to list only a part of it by passing a wildcard to the command.  For example, if you were only interested in all directory entries starting with an <tt>f</tt>, you might have tried <tt>ls f*</tt>.  But did that do what you expected?  Most likely not if any of those matching entries was a directory.  In that case, you might have thought that <tt>ls</tt> was actually recursing into those directories.<br /><br />Let's consider a directory with two entries: a file and a directory.  It may look like:<pre>$ ls -l<br />total 12K<br />drwxr-xr-x 2 jmmv jmmv 4096 Dec 19 15:18 foodir<br />-rw-r--r-- 1 jmmv jmmv    0 Dec 19 15:18 foofile</pre>The <tt>ls</tt> command above was executed inside our directory, without arguments, hence it listed the current directory's contents.  However, if we pass a wildcard we get more results than expected:<pre>$ ls -l *<br />-rw-r--r-- 1 jmmv jmmv    0 Dec 19 15:18 foofile<br /><br />foodir:<br />total 4K<br />-rw-r--r-- 1 jmmv jmmv 0 Dec 19 15:19 anotherfile</pre>What happened in the previous command is that <i>the shell expanded the wildcard</i>; that is, <tt>ls</tt> never saw the special character itself.  In fact, the above was internally converted to <tt>ls -l foofile foodir</tt> and this is what was actually passed to the <tt>ls</tt> utility during its execution.  With this in mind, it is easy to see why you got the contents of the sample directory too: you explicitly (although somewhat "hidden") asked <tt>ls</tt> to show them.<br /><br />How to avoid that?  Use <tt>ls</tt>'s <tt>-d</tt> option, which tells it to list the directory entries themselves, not their contents:<pre>$ ls -l -d *<br />drwxr-xr-x 2 jmmv jmmv 4096 Dec 19 15:19 foodir<br />-rw-r--r-- 1 jmmv jmmv    0 Dec 19 15:18 foofile</pre><b>Update (21st Dec)</b>: Fixed the first command shown as noted by Hubert Feyrer.
