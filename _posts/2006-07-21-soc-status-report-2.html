---
layout: post
title: "SoC: Status report 2"
date: 2006-07-21 07:36:00 -0400
categories:
julipedia: 2006/07/soc-status-report-2.html
excerpt: Post imported from The Julipedia; excerpt not available.
---
Another week has passed and I'm happy to announce that the <a href="https://www.boost-consulting.com:8443/trac/soc/wiki/process/Prototype">Boost.Process prototype</a> is now completely ported to the Win32 API.  In other words, a program can use the current library to transparently manage child processes both from Windows and Unix systems.<br /><br />There are still several rough edges and incomplete classes but the code passes the test suite on both systems :-)  OK, you know that passing a test suite does <i>not</i> mean that the code is correct; it only means that it complies with the existing tests.  So... more tests are needed to spot the existing failures.<br /><br />I'm now going to clean up some parts of the code that make little sense after the huge rototill to port the code to Win32; basically, the internal <tt>pipe</tt> class and its usage.  Then, I'll try to complete the missing Unix-specific bits.<br /><br />Why did I say a "huge rototill"?  After starting to port some code to Windows, I discovered the CRT library.  For a moment, I thought that the porting could be easy, given that this supports the standard POSIX file descriptors and calls (open(2), read(2), etc.).  Unfortunately, I quickly realized that using the CRT could not integrate well with the native Win32 API; and worse, I discovered that Windows only supports communicating with child processes through the three standard channels (stdin, stdout and stderr).  This restriction has forced me to redo most of the existing design and code to offer a clean and common interface on both platforms; file descriptors are now hidden all around unless you explicitly want to see them.<br /><br />Of course this means that the classes used to launch child processes now only accept these three channels, something that is not powerful enough in a Unix system.  In these OSes, processes may need to set up extra communcation pipes with children to retrieve additional information (dbus and GPG come to my mind), so there shall be POSIX-specific classes that allow this interface.<br /><br />I would like to finish the clean up and the addition of POSIX-specific code by the end of the month alongside some simple documentation (formal code examples).  The idea is to be able to publish it for informal review soon afterwards (beginning of August).
