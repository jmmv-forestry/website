---
layout: post
title: "Shutting up /etc/security"
date: 2005-05-22 10:13:00 -0400
categories:
julipedia: 2005/05/shutting-up-etcsecurity.html
excerpt: Post imported from The Julipedia; excerpt not available.
---
<p>For a long time, I've been receiving, almost daily, useless security reports from my <a href="http://www.netbsd.org/">NetBSD</a> boxes.  With "useless", I mean notifications of changes that I know are perfectly legitimate.  That is, all they contained was:</p>  <pre>======<br />/etc/resolv.conf diffs (OLD < > NEW)<br />======<br />--- /var/backups//etc/resolv.conf.current       2005-05-21 [...]<br />+++ /etc/resolv.conf    2005-05-22 [...]<br />@@ -1,3 +1,3 @@<br />-# Created by dhclient at: Sat May 21 15:08:21 CEST 2005<br />+# Created by dhclient at: Sun May 22 13:41:19 CEST 2005<br /> search home.network<br /> nameserver 127.0.0.1</pre><p></p>  <p>As I said, <i>I know</i> that the <tt>resolv.conf</tt> file changes daily due to every run of the <tt>dhclient</tt> utility, so don't bother me telling that!  What I wanted was to remove the date from <tt>resolv.conf</tt>'s header, in order to avoid differences between runs unless something else really changed. After a bit of research I found a way to fix.</p>  <p>The thing is that <tt>dhclient</tt> runs a special script, called <tt>dhclient-script</tt>, which does some pre/post processing over network configuration. This script is not meant to be edited, but it allows to place functional hooks under <tt>/etc/dhclient-enter-hooks</tt> and <tt>/etc/dhclient-exit-hooks</tt>.  And this is what I did: I created the <tt>/etc/dhclient-exit-hooks</tt> file on my machine to remove the date from the generated file:</p>  <pre>if [ -f /etc/resolv.conf ]; then<br />   sed -e 's|^# Created by dhclient at:.*$|# Created by dhclient|'    &lt;/etc/resolv.conf &gt;/etc/resolv.conf.save<br />   cp /etc/resolv.conf.save /etc/resolv.conf<br />   rm /etc/resolv.conf.save<br />fi</pre><p></p>  <p>I'm not sure if this is the best way to solve this little problem, but at least it works.</p><p class="mobile-post"></p>
