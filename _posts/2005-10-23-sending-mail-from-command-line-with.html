---
layout: post
title: "Sending mail from the command line with Mutt"
date: 2005-10-23 15:02:00 -0400
categories:
julipedia: 2005/10/sending-mail-from-command-line-with.html
excerpt_separator: </p>
---
During the migration to <a href="http://www.blogger.com/">Blogger</a>, I used the post-by-mail service to ease the move of all posts. I downloaded all the old ones into my computer and then automatically sent a mail for each of them to the appropriate posting address.<br /><br />However, this was not easy. As all the posts were in HTML format, I needed to tell the mailer to send a multipart message with a <tt>text/html</tt> part.  After many attempts, <a href="http://www.netbsd.org/">NetBSD</a>'s mail(1) command proved to be insufficient so I had to look for another mailing utility to do the same thing. (Note that I know few things about the mail protocol, so I can be missing something.)<br /><br />My first thought was that <a href="http://www.mutt.org/">Mutt</a> could help. Indeed, if I composed an empty mail and attached an HTML file, it did what I wanted. The problem came when I had to automate this from a script... The first attempt was something like:<br /><br /><tt>mutt -s "$(cat mail/$f.subject)" -a mail/$f.html address@example.org</tt><br /><br />Ok, this worked, but having to type <tt>[Enter][Enter]</tt>, then <tt>:wq</tt> and then <tt>y</tt> for each message was not automatic. The first thing I solved was the save and edit part from the editor. Instead of using vi(1), I asked Mutt to use touch(1):<br /><br /><tt>EDITOR=touch mutt -s "$(cat mail/$f.subject)" -a mail/$f.html address@example.org</tt><br /><br />This solved the <tt>:wq</tt> part but I still had to type <tt>[Enter][Enter]y</tt> for each post.  How to solve it... I searched a bit (I mean, <a href="http://www.google.com/">Google</a>ed a bit) and found that giving <tt>/dev/null</tt> as the standard input to Mutt was enough to silence it.  So the command ended being as:<br /><br /><tt>EDITOR=touch mutt -s "$(cat mail/$f.subject)" -a mail/$f.html address@example.org &lt;/dev/null</tt><br /><br />Still, it'd be nice if the standard mail(1) utility was able to send complex messages...
