---
layout: post
title: "Kyua: Weekly status report"
date: 2011-04-24 14:15:00 -0400
categories: atf kyua report
julipedia: 2011/04/kyua-weekly-status-report_24.html
excerpt_separator: </p>
---
Ouch; I'm exhausted. I just finished a multi-hour hacking session to get the implementation of the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">list</span>&nbsp;subcommand in control. It is now in a very nice user-facing shape, although its code deserves a little bit of house cleaning (coming soon).<br /><br />Anyway, this week's progress:<br /><br /><ul><li>Added the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">kyuaify.sh</span> script. This little tool takes a test suite (say, NetBSD's <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">/usr/tests</span> directory) and converts all its <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">Atffile</span>s into <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">Kyuafile</span>s. The tool is no sophisticated at all; in fact, it is a pretty simple script that I haven't tested with any other test suites so far. See the <a href="https://groups.google.com/group/kyua-discuss/browse_thread/thread/d0077d8992a04bf0">announcement of kyuaify</a> for some extra details.</li><li>Added logging support for the Lua code and changed the Lua modules to spit some logging information while processing Kyuafiles and configuration files.</li><li>Added a mechanism in the user interface module to consistently print informational, warning and error messages.</li><li>Implemented proper test filtering (after several iterations). What does proper mean? Well, for starters, test filters are always relative to the test suite's root (although we already saw this in last week's report). But the most important thing is that the filters are now validated: nice, user-friendly errors will be reported when the collection of tests is non-disjoint, when it includes duplicate names or when any of the provided filters does not match any test case. I really need to document the rationale of these in the manual, but for now the <a href="http://code.google.com/p/kyua/source/detail?r=118">r118 commit message</a> includes a few details.</li><li>Drafted some notes for the BSDCan 2011 conference. I am quite tempted to reuse parts of the presentation from NYCBSDCon 2010, but I really want to give more emphasis on Kyua this time. In case you don't know, Kyua was first announced in NYCBSDCon 2010 and it was still a very immature project. The project has changed a lot since then.</li></ul><div>The wishful plan for next week is to clean up the internals of the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">list</span>&nbsp;command (by refactoring and adding unit tests) and implement preliminary integration tests for the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">test</span>&nbsp;subcommand. The latter scares me quite a bit. But... hmm... I guess preparing the presentation for BSDCan 2011 has priority.</div>
