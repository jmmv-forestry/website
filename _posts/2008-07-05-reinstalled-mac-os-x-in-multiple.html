---
layout: post
title: "Reinstalled Mac OS X in multiple partitions, again"
date: 2008-07-05 06:31:00 -0400
categories: fragmentation macbookpro macosx
julipedia: 2008/07/reinstalled-mac-os-x-in-multiple.html
excerpt_separator: </p>
---
Past weekend, for some strange reason, I decided to dump all the MBP's hard disk contents and start again from scratch.  But this time I decided to split the disk into multiple partitions for Mac OS X, to avoid external fragmentation slowdowns as much as possible.<br /><br />I <a href="http://julipedia.blogspot.com/2007/01/install-mac-os-x-over-multiple-volumes.html">already did such a thing</a> back when the MBP was new.  At that time, I created a partition for the system files and another for the user data.  However, that setup was not too optimal and, when I got the 7200RPM hard disk drive six months later, I reinstalled again in a single partition.  Just for convenience.<br /><br />But external fragmentation hurts performance a lot, specially in my case because I need to keep lots of small files (the NetBSD source tree, for example) and files that get fragmented very easily (sparse virtual machine disks).  These end up spreading the files everywhere on the physical disk, and as a result the system slows down considerably.  I even bought iDefrag and it does a good job at optimizing the disk layout... but the results were not as impressive as I expected.<br /><br />This time I reinstalled using the following layout:<br /><ul><li>System: Mounted on /, HFS+ case insensitive, 30GB.</li><li>Users: Mounted on /Users, HFS+ case insensitive, 50GB.</li><li>Windows: Not mounted, NTFS, 40GB.</li><li>Projects: Mounted on /Users/jmmv/Projects, HFS+ case sensitive, 30GB.</li></ul>Windows had to go before Projects so that the MBR partition table was constructed correctly; otherwise Windows failed to start after installation.  The Projects partition holds those small files as well as the virtual machines.  And Users keeps all the personal stuff such as photos, music and documents, which are mostly static.<br /><br />Using this layout, the machine really feels a lot faster.  Applications start quickly, programs that deal with personal data such as iPhoto and iTunes load the library faster, and I don't have to deal with stupid disk images to keep things sequential on disk.  However, the price to pay for such layout is convenience, because now the free disk space is spread in multiple partitions.
