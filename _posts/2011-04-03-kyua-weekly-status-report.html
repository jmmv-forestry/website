---
layout: post
title: "Kyua: Weekly status report"
date: 2011-04-03 15:00:00 -0400
categories: atf kyua report
julipedia: 2011/04/kyua-weekly-status-report.html
excerpt: Post imported from The Julipedia; excerpt not available.
---
This week's work has been quite active on the ATF front but not so much in the Kyua one. I keep being incredibly busy on the weekends (read: traveling!) so it's hard to get any serious development work done.<br /><br />What has happened?<br /><br /><ul><li>Finally tracked down and fixed some random atf-run crashes that had been hunting the NetBSD test suite for months (see <a href="http://gnats.netbsd.org/cgi-bin/query-pr-single.pl?number=44176">PR bin/44176</a>). The fix is in reality an ugly workaround for the fact that a work directory cannot be considered "stable" even after the test case terminates. There may be dying processes around that touch the work directory contents, and the cleanup code in atf-run was not coping well with those. As it turns out, this problem also exists in Kyua (even though it's not as pronounced because arbitrary failures when running a test case do not crash the runtime engine) so I filed <a href="http://code.google.com/p/kyua/issues/detail?id=17">issue 17</a> to address it.</li><li><a href="http://www.netbsd.org/~jmmv/atf/news.html#20110331-atf-0-13-released">Released ATF 0.13</a> and imported it both to NetBSD-current and pkgsrc. As a side note, Kyua requires the new features in this release, so putting it out there is a requirement to release Kyua 0.1. This new release does not have a big effect on NetBSD though, because the copy of ATF in NetBSD has been constantly receiving cherry-picks of the upstream fixes.</li><li>Replaced several TODO items in the Kyua code with proper calls to the logging subsystem. These TODO items were referring to conditions in the code that should not happen, but for which we cannot do any proper recovery (like errors in a destructor). Sure, these could be better signaled as an assertion... but these code paths can be triggered in extremely-tricky conditions and having Kyua crash because of them is not nice (particularly when the side-effects of executing that code paths are non-critical).</li></ul><div>So, in retrospect, I have fulfilled the goal set past week of releasing ATF 0.13, but I haven't got to the addition of integration tests. Oh well... let's see if this upcoming week provides more spare time.</div>
