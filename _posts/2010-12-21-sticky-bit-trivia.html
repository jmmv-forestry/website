---
layout: post
title: "Sticky bit trivia"
date: 2010-12-21 03:50:00 -0500
categories: netbsd
julipedia: 2010/12/sticky-bit-trivia.html
excerpt: Post imported from The Julipedia; excerpt not available.
---
Did you ever wonder where the "sticky" part of the "sticky bit" name comes from? I actually didn't, but I just came across the <a href="http://en.wikipedia.org/wiki/Sticky_bit">Sticky bit page</a> on Wikipedia through <a href="http://twitter.com/#!/aarontoponce/status/17003438298636288">a tweet</a> from <a href="http://twitter.com/#!/AaronToponce">@AaronToponce</a> and discovered why.<div><br /></div><div>If you have used any "recent" (the quotes are important) Unix-like system, you probably know what the sticky bit is used for: to restrict the deletion of files in a directory to, basically, the owner of such files. The sticky bit is used on <tt>/tmp</tt> (among other directories) so that anyone can create temporary files in it but only those that created the temporary files can delete them.</div><div><br /></div><div>But that's not all that is to know.</div><div><br /></div><div>The original purpose of the sticky bit was to <i>mark frequently-used executable files so that the operating system kept their text segment on swap space</i>. This speeded up subsequent executions of such programs because the system would not need to access the file system to load the binary: it could just use the image already kept in the swap space. This behavior became obsolete with the advent of memory-mapped executables.</div><div><br /></div><div>Now it's clear why the sticky bit has the name it has, isn't it?  But still, that's not all that is to know.</div><div><br /></div><div>SunOS 4 introduced a new behavior for the sticky bit on regular, non-executable files: reads and writes to such files would bypass the buffer cache, thus basically telling the system to perform raw I/O on those files. This was particularly useful on swap files when NFS was involved.</div><div><br /></div><div>With the above, I have just tried to summarize you the information that is in NetBSD's <a href="http://netbsd.gw.com/cgi-bin/man-cgi?chmod+2+NetBSD-current">chmod(2)</a> and <a href="http://netbsd.gw.com/cgi-bin/man-cgi?sticky+7+NetBSD-current">sticky(7)</a> manual pages; they contain much more detailed information. (And yep, that's right: contrary to what the Wikipedia article says, NetBSD does <b>not</b> support this behavior any more.) Hope you found this insightful if you did not know this little piece of history!</div>
